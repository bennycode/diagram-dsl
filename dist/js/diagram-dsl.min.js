/*! diagram-dsl 2014-11-09 */

!function(){window.Diagram=window.Diagram||void 0,"undefined"==typeof window.Diagram?(console.warn('Cannot find "window.Diagram" library. Did you forgot to include it?'),console.warn("You can get it here: https://github.com/bramp/js-sequence-diagrams/")):(window.Diagram.DSL=window.Diagram.DSL||{},window.Diagram.DSL.from=function(a){return new Diagram.DSL.Action(a)},window.Diagram.DSL.escapeHash=function(a){var b=window.Diagram.DSL.escapeHash[a];if(!b){if(a.length-1)b=String.fromCharCode(a.substring(a.length-3?2:1));else{var c=a.charCodeAt(0);b=256>c?"%"+(0+c.toString(16)).slice(-2).toUpperCase():"%u"+("000"+c.toString(16)).slice(-4).toUpperCase()}window.Diagram.DSL.escapeHash[b]=a,window.Diagram.DSL.escapeHash[a]=b}return b},window.Diagram.DSL.unescape=window.unescape||function(a){return a.replace(/%(u[\da-f]{4}|[\da-f]{2})/gi,function(a){return window.Diagram.DSL.escapeHash._(a)})})}(),Diagram.DSL.Action=function(){function a(a){this.actorA=a,this.actorB=void 0,this.lineStyle=Diagram.DSL.LineStyle.DEFAULT}return a.prototype.lineTo=function(a){return this.actorB=a,new Diagram.DSL.Command(this)},a.prototype.dashTo=function(a){return this.actorB=a,this.lineStyle=Diagram.DSL.LineStyle.DASHED,new Diagram.DSL.Command(this)},a}(),Diagram.DSL.ArrowStyle={DEFAULT:">",OPEN:">>"},Diagram.DSL.Command=function(){function a(a){this.action=a,this.label=void 0}return a.prototype.withText=function(a){return this.label=a,new Diagram.DSL.Sequence(this)},a}(),Diagram.DSL.Theme={DEFAULT:"simple",HAND_DRAWN:"hand"},Diagram.DSL.LineStyle={DEFAULT:"-",DASHED:"--"},Diagram.DSL.Sequence=function(){function a(a){this.command=a,this.arrowStyle=Diagram.DSL.ArrowStyle.DEFAULT}return a.prototype.andOpenArrow=function(){return this.arrowStyle=Diagram.DSL.ArrowStyle.OPEN,this},a.prototype.toString=function(){return this.command.action.actorA+this.command.action.lineStyle+this.arrowStyle+this.command.action.actorB+": "+this.command.label},a.prototype.on=function(a){return a.addSequence(this)},a}(),Diagram.DSL.SequenceDiagram=function(){function a(a,b){this.title=a,this.sequences=[],this.theme=Diagram.DSL.Theme.DEFAULT,this.element=void 0,b&&(this.theme=b)}return a.prototype.addSequence=function(a){return this.sequences.push(a),this.renderTo(),this},a.prototype.render=function(){var a="";this.title&&(a+="title: "+this.title+"\n");for(var b=0;b<this.sequences.length;b++){var c=this.sequences[b];a+=c.toString()+"\n"}return a},a.prototype.renderFrom=function(a){a&&(this.element=a);var b=a.textContent||a.innerText;this.title&&(b="title: "+this.title+b),a.innerText="";var c=Diagram.parse(b);return c.drawSVG(this.element,{theme:this.theme}),this},a.prototype.renderTo=function(a){a&&(this.element=a);var b=this.render(),c=Diagram.parse(b);return this.element.innerHTML="",c.drawSVG(this.element,{theme:this.theme}),this},a.prototype.saveAsPng=function(){var a=this.element.firstChild,b=a.getBoundingClientRect().width,c=a.getBoundingClientRect().height,d=Math.ceil(b),e=Math.ceil(c),f=document.createElement("canvas");f.width=d,f.height=e,f.style.display="none",this.element.appendChild(f);var g=document.createElement("div");g.appendChild(a.cloneNode(!0));var h=g.innerHTML,i=window.btoa(window.Diagram.DSL.unescape(encodeURIComponent(h))),j=this,k=new Image;k.src="data:image/svg+xml;base64,"+i,k.onload=function(){var a=f.getContext("2d");a.fillStyle="#FFF",a.fillRect(0,0,d,e),a.drawImage(k,0,0);var b=document.createElement("a");b.download=j.title?j.title+".png":"sequence.png",b.href=f.toDataURL("image/png"),j.element.appendChild(b),b.click(),f.remove(),b.remove()}},a}();
//# sourceMappingURL=diagram-dsl.min.js.map