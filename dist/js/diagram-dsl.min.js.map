{"version":3,"file":"diagram-dsl.min.js","sources":["diagram-dsl.js"],"names":["window","Diagram","undefined","console","warn","DSL","from","actorA","Action","escapeHash","input","ret","length","String","fromCharCode","substring","code","charCodeAt","toString","slice","toUpperCase","unescape","str","replace","seq","_","this","actorB","lineStyle","LineStyle","DEFAULT","prototype","lineTo","Command","dashTo","DASHED","ArrowStyle","OPEN","action","label","withText","Sequence","Theme","HAND_DRAWN","command","arrowStyle","andOpenArrow","on","diagram","addSequence","SequenceDiagram","title","theme","sequences","element","sequence","push","renderTo","render","output","i","renderFrom","textContent","innerText","parsedOutput","parse","drawSVG","innerHTML","saveAsPng","svgElement","firstChild","svgWidth","getBoundingClientRect","width","svgHeight","height","Math","ceil","canvas","document","createElement","style","display","appendChild","outer","cloneNode","xml","unicodeXml","btoa","encodeURIComponent","self","image","Image","src","onload","context","getContext","fillStyle","fillRect","drawImage","anchor","download","href","toDataURL","click","remove"],"mappings":"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"}